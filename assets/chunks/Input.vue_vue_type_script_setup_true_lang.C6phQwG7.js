import{N as K,d as U,a8 as N,aa as E,h as k,s as w,a9 as W,o as s,c as l,F as q,r as p,e as t,j as R,a4 as S,ab as G,M as A,k as L,b as g,a0 as C,n as T,ac as H,P as J,R as Q}from"./framework.Byz0jkBf.js";import{_ as $}from"./Icon.vue_vue_type_script_setup_true_lang.DiR7tFiX.js";const X=Symbol("formContextKey"),Y=Symbol("formItemContextKey"),Z=()=>({formContext:K(X,void 0),formItemContext:K(Y,void 0)}),x={key:0,class:"vc-input__prepend"},ee={key:0,class:"vc-input__prefix"},se=["placeholder","readonly","autocomplete","autofocus","form","disabled","type"],oe={key:1,class:"vc-input__append"},ae=["placeholder","readonly","autocomplete","autofocus","form","disabled"],ne=U({name:"VcInput",inheritAttrs:!1,__name:"Input",props:N({style:{},modelValue:{},type:{default:"text"},size:{},disabled:{type:Boolean,default:!1},prefixIcon:{},suffixIcon:{},maxLength:{},minLength:{},showWordLimit:{type:Boolean},showPassword:{type:Boolean},clearable:{type:Boolean},placeholder:{default:"请输入内容"},readonly:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},form:{},parser:{}},{modelValue:{},modelModifiers:{}}),emits:N(["update:modelValue","blur","focus","input","change","clear"],["update:modelValue"]),setup(B,{expose:_,emit:j}){const{formItemContext:c}=Z(),f=e=>{c==null||c.validate(e).catch(r=>console.log(r.errors))},V=E(),n=B,D=k(()=>n.showPassword?i.value?"text":"password":n.type),m=()=>{},u=w(!1),i=w(!1),o=W(B,"modelValue"),a=j,d=w(),I=k(()=>n.clearable&&!n.disabled&&!!o.value&&u.value),v=k(()=>n.showPassword&&!n.disabled&&!!o.value),M=()=>{i.value=!i.value},y=e=>{u.value=!1,a("blur",e),f("blur")},h=e=>{u.value=!0,a("focus",e)},F=()=>{a("input",o.value),f("input")},P=e=>{a("change",e.target.value),f("change")},O=async()=>{await Q(),d.value.focus()},z=()=>{o.value="",a("clear"),a("input",""),a("change","")};return _({ref:d,blur:y,focus:h,input:d,clear:z}),(e,r)=>(s(),l("div",{style:J(e.style),class:T(["",{[e.type==="textarea"?"vc-textarea":"vc-input"]:!0,[`vc-input--${e.type}`]:e.type,[`vc-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":e.$slots.prepend,"is-append":e.$slots.append,"is-prefix":e.$slots.prefix,"is-suffix":e.$slots.suffix,"is-focus":u.value}])},[e.type!=="textarea"?(s(),l(q,{key:0},[e.$slots.prepend?(s(),l("div",x,[p(e.$slots,"prepend")])):t("",!0),R("div",{class:T(["vc-input__wrapper",{"is-focus":u.value}])},[e.$slots.prefix?(s(),l("span",ee,[p(e.$slots,"prefix")])):t("",!0),S(R("input",A(L(V),{placeholder:e.placeholder,readonly:e.readonly,autocomplete:e.autocomplete,autofocus:e.autofocus,form:e.form,onInput:F,onChange:P,onFocus:h,onBlur:y,"onUpdate:modelValue":r[0]||(r[0]=b=>o.value=b),disabled:e.disabled,ref_key:"inputRef",ref:d,class:"vc-input__inner",type:D.value}),null,16,se),[[G,o.value]]),e.$slots.suffix||I.value||v.value?(s(),l("span",{key:1,class:"vc-input__suffix",onClick:O},[p(e.$slots,"suffix"),I.value?(s(),g($,{key:0,onClick:z,icon:"circle-xmark",class:"vc-input__clear",onMousedown:C(m,["prevent"])})):t("",!0),v.value&&i.value?(s(),g($,{key:1,onMousedown:C(m,["prevent"]),onClick:M,icon:"eye",class:"vc-input__password"})):t("",!0),v.value&&!i.value?(s(),g($,{key:2,onMousedown:C(m,["prevent"]),onClick:M,icon:"eye-slash",class:"vc-input__password"})):t("",!0)])):t("",!0)],2),e.$slots.append?(s(),l("div",oe,[p(e.$slots,"append")])):t("",!0)],64)):S((s(),l("textarea",A({key:1},L(V),{placeholder:e.placeholder,readonly:e.readonly,autocomplete:e.autocomplete,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":r[1]||(r[1]=b=>o.value=b),disabled:e.disabled,ref_key:"inputRef",ref:d,onInput:F,onChange:P,onFocus:h,onBlur:y,class:["vc-textarea__inner",{"is-focus":u.value,"is-disabled":e.disabled}]}),null,16,ae)),[[H,o.value]])],6))}});export{ne as _,Y as a,X as f};
